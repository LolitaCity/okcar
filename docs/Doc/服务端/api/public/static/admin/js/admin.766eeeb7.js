(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"2f21":function(t,e,a){"use strict";var o=a("79e5");t.exports=function(t,e){return!!t&&o(function(){e?t.call(null,function(){},1):t.call(null)})}},4052:function(t,e,a){},"55dd":function(t,e,a){"use strict";var o=a("5ca1"),n=a("d8e8"),s=a("4bf8"),r=a("79e5"),i=[].sort,l=[1,2,3];o(o.P+o.F*(r(function(){l.sort(void 0)})||!r(function(){l.sort(null)})||!a("2f21")(i)),"Array",{sort:function(t){return void 0===t?i.call(s(this)):i.call(s(this),n(t))}})},8107:function(t,e,a){"use strict";var o=a("cb56"),n=a.n(o);n.a},cb56:function(t,e,a){},cea7:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("l-frame",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"card card-default"},[a("div",{staticClass:"card-header"},[a("h4",{staticClass:"card-desc"},[t._v("所有平台管理员")]),a("div",{staticClass:"card-btns"},[a("el-button",{staticStyle:{"margin-right":"1em"},attrs:{size:"medium",type:"primary",plain:""},on:{click:t.onAddClick}},[a("i",{staticClass:"fa fa-fw fa-plus"}),t._v(" 添加管理员\n                        ")]),a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入搜索关键字（登录名）","prefix-icon":"el-icon-search",size:"medium"},on:{change:t.onKeywordChange,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onKeywordChange(e):null}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)]),a("div",{staticClass:"card-body"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list.items,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"登录用户名",width:"200"}}),a("el-table-column",{attrs:{label:"具备权限"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticStyle:{"margin-bottom":"-4px"}},t._l(t.authEnums,function(o,n){return e.row["auth"].indexOf(o.value)>-1?a("el-tag",{key:n,staticStyle:{margin:"0 4px 4px 0"},attrs:{type:"success",size:"small"}},[t._v(t._s(o.text)+"\n                                ")]):t._e()}))}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"150"}}),a("el-table-column",{attrs:{prop:"updated_at",label:"最后修改时间",width:"150"}}),a("el-table-column",{attrs:{label:"操作",width:"280",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-links"},[a("a",{attrs:{href:"javascript:"},on:{click:function(a){t.changeAuth(e.row)}}},[a("i",{staticClass:"fa fa-fw fa-edit"}),t._v("修改权限\n                                    ")]),a("a",{attrs:{href:"javascript:"},on:{click:function(a){t.reset(e.row)}}},[a("i",{staticClass:"fa fa-fw fa-lock"}),t._v("重置密码\n                                    ")]),a("a",{attrs:{href:"javascript:"},on:{click:function(a){t.remove(e.row)}}},[a("i",{staticClass:"fa fa-fw fa-times"}),t._v("删除")])])]}}])})],1),a("c-page",{attrs:{page:t.list.page,totalPage:t.list.totalPage},on:{onPageChange:t.refresh}})],1)])])]),a("p-list-add-dialog",{ref:"addDialog"}),a("p-list-edit-password-dialog",{ref:"resetPasswdDialog"}),a("p-list-edit-auth-dialog",{ref:"editAuthDialog"})],1)},n=[],s=(a("c5f6"),a("28a5"),a("c93e")),r=(a("7f7f"),a("d5e4")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"添加管理员",visible:t.open,width:"800px","before-close":t.onClose}},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"90px",size:"small"}},[a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{attrs:{placeholder:"名称只能是字母、数字、下划线，长度2 - 50位"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"密码至少6位"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[a("template",{slot:"append"},[a("el-button",{on:{click:t.randomPass}},[t._v("生成随机密码")])],1)],2)],1),a("el-form-item",{attrs:{label:"开通权限"}},[a("el-checkbox-group",{model:{value:t.auth,callback:function(e){t.auth=e},expression:"auth"}},t._l(t.authEnums,function(e,o){return a("el-checkbox",{key:o,attrs:{label:e.value}},[t._v(t._s(e.text))])}))],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.onClose}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)},l=[];a("55dd");function c(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return c(t)||u(t)||f()}var m=a("2ef0"),h=a.n(m),p={computed:{rules:function(){return{name:[{required:!0,message:"请输入用户名",trigger:"change"},{pattern:/^[a-zA-Z0-9_]+$/,min:2,max:50,message:"只能是字母、数字、下划线，长度在 2 到 50 个字符",trigger:"change"}],password:[{required:!0,message:"请选择密码",trigger:"change"},{min:6,message:"密码至少6位",trigger:"change"}]}},authEnums:function(){return r["b"]}},data:function(){return{open:!1,form:{name:"",password:""},callback:null,auth:[]}},mounted:function(){},methods:{showDialog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onSuccess;this.open=!0,this.form={name:"",password:"",auth:{}},this.callback=e},onClose:function(){this.open=!1,this.$refs["form"].resetFields()},randomPass:function(){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",e="",a=0;a<20;a++)e+=t[Math.floor(Math.random()*t.length)];this.form.password=e},onSubmit:function(){var t=this;this.$refs["form"].validate(function(e){if(e){var a=d(t.auth);a.sort(),t.$store.dispatch("accountCreate",{data:Object(s["a"])({},t.form,{auth:a.join("")}),success:function(){t.onClose(),h.a.isFunction(t.callback)&&t.callback()},error:function(e){t.alert(e)}})}})}}},g=p,b=(a("ff69"),a("2877")),v=Object(b["a"])(g,i,l,!1,null,null,null);v.options.__file="list-add-dialog.vue";var w=v.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"重置密码",visible:t.open,width:"800px","before-close":t.onClose}},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"90px",size:"small"}},[a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"密码至少6位"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[a("template",{slot:"append"},[a("el-button",{on:{click:t.randomPass}},[t._v("生成随机密码")])],1)],2)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.onClose}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)},_=[],y={computed:{rules:function(){return{password:[{required:!0,message:"请选择密码",trigger:"change"},{min:6,message:"密码至少6位",trigger:"change"}]}},authEnums:function(){return r["b"]}},data:function(){return{open:!1,form:{id:"",name:"",password:""},callback:null}},mounted:function(){},methods:{showDialog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.row,a=t.onSuccess;this.open=!0,this.form={id:e.id,name:e.name,password:""},this.callback=a},onClose:function(){this.open=!1,this.$refs["form"].resetFields()},randomPass:function(){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",e="",a=0;a<20;a++)e+=t[Math.floor(Math.random()*t.length)];this.form.password=e},onSubmit:function(){var t=this;this.$refs["form"].validate(function(e){e&&t.$store.dispatch("accountEdit",{data:{id:t.form.id,password:t.form.password},success:function(){t.onClose(),h.a.isFunction(t.callback)&&t.callback()},error:function(e){t.alert(e)}})})}}},x=y,C=Object(b["a"])(x,k,_,!1,null,null,null);C.options.__file="list-edit-passwd-dialog.vue";var S=C.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"修改权限",visible:t.open,width:"800px","before-close":t.onClose}},[a("el-form",{ref:"form",attrs:{"label-width":"90px",size:"small"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("el-form-item",{attrs:{label:"开通权限"}},[a("el-checkbox-group",{model:{value:t.auth,callback:function(e){t.auth=e},expression:"auth"}},t._l(t.authEnums,function(e,o){return a("el-checkbox",{key:o,attrs:{label:e.value}},[t._v(t._s(e.text))])}))],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.onClose}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)},E=[],D={computed:{authEnums:function(){return r["b"]}},data:function(){return{open:!1,callback:null,id:"",name:"",auth:[]}},mounted:function(){},methods:{showDialog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onSuccess,a=t.row;this.open=!0,this.name=a.name,this.id=a.id,this.auth=a.auth,this.callback=e},onClose:function(){this.open=!1,this.$refs["form"].resetFields()},onSubmit:function(){var t=this,e=d(this.auth);e.sort(),this.$store.dispatch("accountEdit",{data:{id:this.id,auth:e.join("")},success:function(){t.onClose(),h.a.isFunction(t.callback)&&t.callback()},error:function(e){t.alert(e)}})}}},A=D,j=Object(b["a"])(A,$,E,!1,null,null,null);j.options.__file="list-edit-auth-dialog.vue";var P=j.exports,O={computed:{authEnums:function(){return r["b"]}},data:function(){return{loading:!0,keyword:"",list:{items:[],page:1,totalPage:0,pageSize:0}}},components:{pListAddDialog:w,pListEditPasswordDialog:S,pListEditAuthDialog:P},mounted:function(){this.refresh()},methods:{onKeywordChange:function(){this.refresh(this.list.page)},refresh:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.$store.dispatch("accountList",{data:{page:e,keyword:this.keyword},success:function(e){t.list=e,t.loading=!1},error:function(e){t.alert(e),t.loading=!1}})},reset:function(t){var e=this;this.$refs["resetPasswdDialog"].showDialog({row:t,onSuccess:function(){e.refresh(e.list.page)}})},remove:function(t){var e=this;this.confirm("确认要删除".concat(t.name,"吗？"),function(){e.$store.dispatch("accountDelete",{data:{id:t.id},success:function(){e.refresh(e.list.page)},error:function(t){e.alert(t)}})})},onAddClick:function(){var t=this;this.$refs["addDialog"].showDialog({onSuccess:function(){t.refresh(t.list.page)}})},changeAuth:function(t){var e=this;this.$refs["editAuthDialog"].showDialog({onSuccess:function(){e.refresh(e.list.page)},row:Object(s["a"])({},t,{auth:t.auth.split("").map(function(t){return Number(t)})})})}}},z=O,F=(a("8107"),Object(b["a"])(z,o,n,!1,null,"991e541c",null));F.options.__file="list.vue";e["default"]=F.exports},ff69:function(t,e,a){"use strict";var o=a("4052"),n=a.n(o);n.a}}]);
//# sourceMappingURL=admin.766eeeb7.js.map