(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["car"],{"0621":function(t,e,r){},2419:function(t,e,r){},6729:function(t,e,r){"use strict";var n=r("fe73"),i=r.n(n);i.a},"74da":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("l-frame",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xl-12"},[r("div",{staticClass:"card card-default"},[r("div",{staticClass:"card-header"},[r("div",[r("h4",{staticClass:"card-desc"},[t._v("所有车型")]),r("div",{staticClass:"card-btns"},[r("el-select",{staticStyle:{"margin-right":"10px"},attrs:{filterable:"",placeholder:"请选择"},on:{change:t.onBrandChange},model:{value:t.params.brand_id,callback:function(e){t.$set(t.params,"brand_id",e)},expression:"params.brand_id"}},t._l(t.brandList,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),r("el-select",{staticStyle:{"margin-right":"10px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.params.series_id,callback:function(e){t.$set(t.params,"series_id",e)},expression:"params.series_id"}},t._l(t.seriesSelects,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),r("el-button",{attrs:{type:"success",icon:"el-icon-search",plain:""},on:{click:t.onSearchClick}},[t._v("搜索")]),r("el-button",{attrs:{size:"medium",type:"primary",plain:"",icon:"el-icon-plus"},on:{click:t.onAddClick}},[t._v("添加车型\n                            ")])],1)])]),r("div",{staticClass:"card-body car-card-body"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"指导价"}},[r("span",[t._v(t._s(e.row.guide_price))])]),r("el-form-item",{attrs:{label:"外观"}},[r("span",t._l(e.row.appearance,function(e,n){return r("el-tag",{key:n,staticClass:"car-tag",attrs:{type:t.colorList[n%5]}},[t._v(t._s(e.color))])}))]),r("el-form-item",{attrs:{label:"内饰"}},[r("span",t._l(e.row.decoration,function(e,n){return r("el-tag",{key:n,staticClass:"car-tag",attrs:{type:t.colorList[n%5]}},[t._v(t._s(e.color))])}))])],1)]}}])}),r("el-table-column",{attrs:{prop:"model",label:"车型名称"}}),r("el-table-column",{attrs:{prop:"produce_year",sortable:"",label:"生产年限",filters:t.dstc_data.produce_year,"filter-method":t.filterProduceYear,"filter-placement":"bottom-end"}}),r("el-table-column",{attrs:{prop:"rule_desc",label:"车规",filters:t.dstc_data.rule_desc,"filter-method":t.filterRuleDesc,"filter-placement":"bottom-end"}}),r("el-table-column",{attrs:{prop:"manufactures",label:"生产商",filters:t.dstc_data.manufactures,"filter-method":t.filterManufactures,"filter-placement":"bottom-end"}}),r("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return r("div",{staticClass:"table-links"},[r("a",{attrs:{href:"javascript:"},on:{click:function(r){t.onEdit(e.row)}}},[t._v("编辑")]),r("a",{attrs:{href:"javascript:"},on:{click:function(r){t.onDelete(e.row)}}},[t._v("删除")])])}}])})],1),r("el-pagination",{attrs:{"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"current-change":t.handleCurrentChange}})],1)])])]),r("pListAddDialog",{ref:"addDialog"})],1)},i=[];r("96cf");function a(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(t,e){try{var r=a[t](e),o=r.value}catch(t){return void i(t)}r.done?n(o):Promise.resolve(o).then(s,l)}function s(t){o("next",t)}function l(t){o("throw",t)}s()})}}r("cadf"),r("551c"),r("097d");var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:t.edit?"编辑车型":"添加车型",visible:t.open,width:"500px","before-close":t.onClose}},[r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"90px",size:"small"}},[r("el-form-item",{attrs:{label:"品牌",prop:"brandId"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.brand_id,callback:function(e){t.$set(t.form,"brand_id",e)},expression:"form.brand_id"}},t._l(t.brandList,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),r("el-form-item",{attrs:{label:"车系名称",prop:"series"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.series_id,callback:function(e){t.$set(t.form,"series_id",e)},expression:"form.series_id"}},t._l(t.seriesList,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),r("el-form-item",{attrs:{label:"车型名称",prop:"model"}},[r("el-input",{model:{value:t.form.model,callback:function(e){t.$set(t.form,"model",e)},expression:"form.model"}})],1),r("el-form-item",{attrs:{label:"生产年限",prop:"produce_year"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.produce_year,callback:function(e){t.$set(t.form,"produce_year",e)},expression:"form.produce_year"}},t._l(t.yearList,function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})}))],1),r("el-form-item",{attrs:{label:"外观",prop:"appearance"}},[r("el-input",{attrs:{placeholder:"输入颜色回车添加",size:"medium"},on:{change:t.onAppearanceChange,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onAppearanceChange(e):null}},model:{value:t.appearance,callback:function(e){t.appearance=e},expression:"appearance"}})],1),r("el-form-item",{attrs:{label:"外观",prop:"appearance"}},t._l(t.form.appearance,function(e,n){return e.is_del?t._e():r("el-tag",{key:n,staticClass:"car-tag",attrs:{type:t.colorList[n%5],icon:""}},[t._v(t._s(e.color)+" "),r("i",{staticClass:"el-icon-close",on:{click:function(e){t.delTag(n,"appearance")}}})])})),r("el-form-item",{attrs:{label:"内饰",prop:"decoration"}},[r("el-input",{attrs:{placeholder:"输入颜色回车添加",size:"medium"},on:{change:t.onDecorationChange,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onDecorationChange(e):null}},model:{value:t.decoration,callback:function(e){t.decoration=e},expression:"decoration"}})],1),r("el-form-item",{attrs:{label:"内饰",prop:"decoration"}},t._l(t.form.decoration,function(e,n){return e.is_del?t._e():r("el-tag",{key:n,staticClass:"car-tag",attrs:{type:t.colorList[n%5],icon:""}},[t._v(t._s(e.color)+" "),r("i",{staticClass:"el-icon-close",on:{click:function(e){t.delTag(n,"decoration")}}})])})),r("el-form-item",{attrs:{label:"指导价",prop:"guide_price"}},[r("el-input",{model:{value:t.form.guide_price,callback:function(e){t.$set(t.form,"guide_price",e)},expression:"form.guide_price"}})],1),r("el-form-item",{attrs:{label:"生产厂家",prop:"manufactures"}},[r("el-input",{model:{value:t.form.manufactures,callback:function(e){t.$set(t.form,"manufactures",e)},expression:"form.manufactures"}})],1),r("el-form-item",{attrs:{label:"规格",prop:"rule"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.rule,callback:function(e){t.$set(t.form,"rule",e)},expression:"form.rule"}},t._l(t.ruleList,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.open=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)},s=[],l=r("c93e"),c=(r("7514"),r("7f7f"),r("2ef0")),u=r.n(c),f={computed:{},data:function(){return{open:!1,edit:!1,form:{id:"",brand_id:"",brand_info:{},series:"",series_id:"",model:"",produce_year:0,guide_price:0,manufactures:"",rule:"",rule_desc:"",appearance:[],decoration:[]},appearance:"",decoration:"",callback:null,brandList:[],yearList:[],seriesList:[],ruleList:[{id:1,name:"国产"},{id:2,name:"中规"},{id:3,name:"美规"},{id:4,name:"加规"},{id:5,name:"中东"},{id:6,name:"欧版"},{id:7,name:"墨版"}],colorList:["primary","success","info","warning","danger"]}},mounted:function(){var t=this;r.e("pinyin").then(function(){t.$pinyin=r("9804")}.bind(null,r)).catch(r.oe),this.yearList=this.getYearList()},methods:{getYearList:function(){for(var t=[],e=(new Date).getFullYear(),r=0;r<40;r++)t.push(e-r);return t},showDialog:function(t){var e=t.onSuccess,r=t.car;this.open=!0,this.edit=!!r,r&&(this.form=u.a.pick(r,["id","brand_id","series_id","model","produce_year","guide_price","manufactures","rule","rule_desc","appearance","decoration"])),this.getBrands(),this.getSeries(),this.callback=e},onClose:function(){this.open=!1},refreshPinyin:function(){this.form.pinyin=this.$pinyin.toPinYin(this.form.name)},handleAvatarSuccess:function(t){this.form.logo=u.a.get(t,"data.url","")},getBrands:function(){var t=this;this.$store.dispatch("brandList",{success:function(e){t.brandList=e},error:function(e){t.alert(e)}})},getSeries:function(){var t=this;this.$store.dispatch("seriesList",{success:function(e){t.seriesList=e},error:function(e){t.alert(e)}})},onSubmit:function(){var t=this;this.$refs["form"].validate(function(e){if(e){var r=t.form.series_id;t.form.series=t.seriesList.find(function(t){return t.id===r}).name;var n=JSON.stringify(t.form.appearance),i=JSON.stringify(t.form.decoration);t.$store.dispatch(t.edit?"carEdit":"carAdd",{data:Object(l["a"])({},t.form,{appearance:n,decoration:i}),success:function(){u.a.isFunction(t.callback)&&(t.open=!1,t.callback())},error:function(e){t.alert(e)}})}})},delTag:function(t,e){var r=this.form[e][t];r.id?(r.is_del=!0,this.form[e][t]=r,this.$set(this.form[e],t,r)):this.form[e].splice(t,1)},onAppearanceChange:function(t){var e=this.form.id,r={color:t,model_id:e};this.form.appearance.push(r),this.appearance=""},onDecorationChange:function(t){var e=this.form.id,r={color:t,model_id:e};this.form.decoration.push(r),this.decoration=""}}},d=f,p=(r("7b12"),r("2877")),h=Object(p["a"])(d,o,s,!1,null,null,null);h.options.__file="list-add-dialog.vue";var m=h.exports,g={data:function(){return{loading:!0,list:[],pagination:{total:0,currentPage:1,pageSize:30},params:{brand_id:"",series_id:""},brandList:[],seriesList:[],seriesSelects:[],dstc_data:{produce_year:[],manufactures:[],rule_desc:[]},colorList:["primary","success","info","warning","danger"]}},components:{pListAddDialog:m},mounted:function(){var t=a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getBrands();case 2:return t.next=4,this.getSeries();case 4:this.refresh();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{handleCurrentChange:function(t){this.pagination.currentPage=t},refresh:function(){var t=this;this.loading=!0,this.$store.dispatch("carList",{data:this.params,success:function(e){t.list=e.list,t.dstc_data=e.dstc_data,t.loading=!1},error:function(e){t.alert(e),t.loading=!1}})},onAddClick:function(){var t=this;this.$refs["addDialog"].showDialog({onSuccess:function(){t.refresh()}})},onSearchClick:function(){this.refresh()},remove:function(t){var e=this;this.$store.dispatch("carDelete",{data:{id:t},success:function(){e.refresh()},error:function(t){e.alert(t)}})},getBrands:function(){var t=this;return new Promise(function(e,r){t.$store.dispatch("brandList",{success:function(r){t.brandList=r,t.params.brand_id=u.a.isArray(r)&&u.a.isObject(r[0])?r[0].id:"",e()},error:function(e){t.alert(e),r()}})})},initSeriesSelect:function(){var t=this.params.brand_id;this.seriesSelects=this.seriesList.filter(function(e){return e.brand_id===t}),this.params.series_id=this.seriesSelects.length>0&&u.a.isObject(this.seriesSelects[0])?this.seriesSelects[0].id:""},getSeries:function(){var t=this;return new Promise(function(e,r){t.$store.dispatch("seriesList",{success:function(r){t.seriesList=r,t.initSeriesSelect(),e()},error:function(e){t.alert(e),r()}})})},onBrandChange:function(){this.initSeriesSelect()},onEdit:function(t){var e=this;this.$refs["addDialog"].showDialog({car:t,onSuccess:function(){e.refresh()}})},onDelete:function(t){var e=this;this.confirm("确认要删除[".concat(t.model,"]吗？"),function(){e.remove(t.id)})},filterProduceYear:function(t,e){return e.produce_year==t},filterManufactures:function(t,e){return e.manufactures==t},filterRuleDesc:function(t,e){return e.rule_desc==t}}},v=g,b=(r("e259"),Object(p["a"])(v,n,i,!1,null,"b89cbb36",null));b.options.__file="list.vue";e["default"]=b.exports},"7b12":function(t,e,r){"use strict";var n=r("d127"),i=r.n(n);i.a},"96cf":function(t,e){!function(e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag",c="object"===typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{u=e.regeneratorRuntime=c?t.exports:{},u.wrap=_;var f="suspendedStart",d="suspendedYield",p="executing",h="completed",m={},g={};g[o]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(O([])));b&&b!==n&&i.call(b,o)&&(g=b);var y=L.prototype=k.prototype=Object.create(g);x.prototype=y.constructor=L,L.constructor=x,L[l]=x.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,L):(t.__proto__=L,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(y),t},u.awrap=function(t){return{__await:t}},C(S.prototype),S.prototype[s]=function(){return this},u.AsyncIterator=S,u.async=function(t,e,r,n){var i=new S(_(t,e,r,n));return u.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},C(y),y[l]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},u.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;j(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),m}}}function _(t,e,r,n){var i=e&&e.prototype instanceof k?e:k,a=Object.create(i.prototype),o=new P(n||[]);return a._invoke=$(t,r,o),a}function w(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function k(){}function x(){}function L(){}function C(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){function e(r,n,a,o){var s=w(t[r],t,n);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"===typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(c).then(function(t){l.value=t,a(l)},o)}o(s.arg)}var r;function n(t,n){function i(){return new Promise(function(r,i){e(t,n,r,i)})}return r=r?r.then(i,i):i()}this._invoke=n}function $(t,e,r){var n=f;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===h){if("throw"===i)throw a;return A()}r.method=i,r.arg=a;while(1){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var l=w(t,e,r);if("normal"===l.type){if(n=r.done?h:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=h,r.method="throw",r.arg=l.arg)}}}function E(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,E(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=w(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){while(++n<t.length)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},a770:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("l-frame",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xl-12"},[r("div",{staticClass:"card card-default"},[r("div",{staticClass:"card-header"},[r("h4",{staticClass:"card-desc"},[t._v("所有品牌")]),r("div",{staticClass:"card-btns"},[r("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.onAddClick}},[r("i",{staticClass:"fa fa-fw fa-plus"}),t._v(" 添加品牌\n                        ")])],1)]),r("div",{staticClass:"card-body"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[r("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"图标",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.logo?r("img",{staticClass:"brand-list-logo",attrs:{src:e.row.logo}}):t._e()]}}])}),r("el-table-column",{attrs:{prop:"name",label:"名称"}}),r("el-table-column",{attrs:{prop:"pinyin",label:"拼音"}}),r("el-table-column",{attrs:{prop:"model_info_list_count",label:"车型数量",width:"150"}}),r("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return r("div",{staticClass:"table-links"},[r("a",{attrs:{href:"javascript:"},on:{click:function(r){t.onEdit(e.row)}}},[r("i",{staticClass:"fa fa-fw fa-edit"}),t._v("编辑")]),r("a",{attrs:{href:"javascript:"},on:{click:function(r){t.onDelete(e.row)}}},[r("i",{staticClass:"fa fa-fw fa-times"}),t._v("删除")])])}}])})],1)],1)])])]),r("pListAddDialog",{ref:"addDialog"})],1)},i=[],a=(r("7f7f"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:t.edit?"编辑品牌":"添加品牌",visible:t.open,width:"500px","before-close":t.onClose}},[r("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"90px",size:"small"}},[r("el-form-item",{attrs:{label:"品牌名称",prop:"name"}},[r("el-input",{on:{change:t.refreshPinyin},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"拼音",prop:"pinyin"}},[r("el-input",{model:{value:t.form.pinyin,callback:function(e){t.$set(t.form,"pinyin",e)},expression:"form.pinyin"}})],1),r("el-form-item",{attrs:{label:"logo",prop:"logo"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{name:"image",data:{key:"brand"},action:t.uploadUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.form.logo?r("img",{staticClass:"avatar",attrs:{src:t.form.logo}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.open=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)}),o=[],s=r("9511"),l={name:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],pinyin:[{required:!0,message:"请选择品牌拼音",trigger:"blur"},{min:1,max:200,message:"长度在 1 到 200 个字符",trigger:"blur"}],logo:[{required:!0,message:"请上传品牌logo",trigger:"change"}]},c=r("2ef0"),u=r.n(c),f={computed:{uploadUrl:function(){return s["H"]},rules:function(){return l}},data:function(){return{open:!1,edit:!1,form:{id:"",name:"",pinyin:"",logo:""},callback:null}},mounted:function(){var t=this;r.e("pinyin").then(function(){t.$pinyin=r("9804")}.bind(null,r)).catch(r.oe)},methods:{showDialog:function(t){var e=t.onSuccess,r=t.brand;this.open=!0,this.edit=!!r,this.form=r?u.a.pick(r,["id","name","pinyin","logo"]):{id:"",name:"",pinyin:"",logo:""},this.callback=e},onClose:function(){this.open=!1},refreshPinyin:function(){this.form.pinyin=this.$pinyin.toPinYin(this.form.name)},handleAvatarSuccess:function(t){this.form.logo=u.a.get(t,"data.url","")},onSubmit:function(){var t=this;this.$refs["form"].validate(function(e){e&&t.$store.dispatch(t.edit?"brandEdit":"brandAdd",{data:t.form,success:function(){u.a.isFunction(t.callback)&&(t.open=!1,t.callback())},error:function(e){t.alert(e)}})})}}},d=f,p=(r("ed06"),r("2877")),h=Object(p["a"])(d,a,o,!1,null,null,null);h.options.__file="list-add-dialog.vue";var m=h.exports,g={data:function(){return{loading:!0,list:[]}},components:{pListAddDialog:m},mounted:function(){this.refresh()},methods:{refresh:function(){var t=this;this.loading=!0,this.$store.dispatch("brandList",{success:function(e){t.list=e,t.loading=!1},error:function(e){t.alert(e),t.loading=!1}})},onAddClick:function(){var t=this;this.$refs["addDialog"].showDialog({onSuccess:function(){t.refresh()}})},remove:function(t){var e=this;this.$store.dispatch("brandDelete",{data:{id:t},success:function(){e.refresh()},error:function(t){e.alert(t)}})},onEdit:function(t){var e=this;this.$refs["addDialog"].showDialog({brand:t,onSuccess:function(){e.refresh()}})},onDelete:function(t){var e=this;this.confirm("确认要删除[".concat(t.name,"]吗？"),function(){t.model_info_list_count?e.confirm("该品牌下还有".concat(t.model_info_list_count,"个车型，真的要删除吗？"),function(){e.remove(t.id)}):e.remove(t.id)})}}},v=g,b=(r("6729"),Object(p["a"])(v,n,i,!1,null,"1b31fc44",null));b.options.__file="list.vue";e["default"]=b.exports},d127:function(t,e,r){},e259:function(t,e,r){"use strict";var n=r("2419"),i=r.n(n);i.a},ed06:function(t,e,r){"use strict";var n=r("0621"),i=r.n(n);i.a},fe73:function(t,e,r){}}]);
//# sourceMappingURL=car.2fc21603.js.map